var dir="desc",firsTime=!0;if(void 0===notifyPercentage)var notifyPercentage=90;if(void 0===minWarehouseSize)var minWarehouseSize=6e4;console.log(notifyPercentage),console.log(minWarehouseSize);try{var table=document.getElementById("production_table");for(i=0;i<table.rows.length;i++){var resourcesText=table.rows[i].cells[3].innerText.split(".").join("").split(" "),wood=Number(resourcesText[0]),clay=Number(resourcesText[1]),iron=Number(resourcesText[2]),warehouseSize=table.rows[i].cells[4].innerText,totalResources=wood+clay+iron,highestResource=Math.max(wood,clay,iron),percentage=highestResource/warehouseSize*100;if(console.log("Resources: "+wood+", "+clay+", "+iron+"    Total: "+totalResources+"     Warehouse: "+3*warehouseSize+"     %: "+percentage),0!=i){percentage=Math.round(100*percentage)/100,table.rows[i].insertCell(4).innerText=percentage+"%";var colorPercent=Math.abs(percentage-100),red=colorPercent>50?1-2*(colorPercent-50)/100:1,green=colorPercent>50?1:2*colorPercent/100;if(table.rows[i].cells[4].style=`background: linear-gradient(to right, rgba(${255*red}, ${255*green}, 0,100) ${percentage}%,rgba(255, 255, 255,50) ${percentage}%) !important`,percentage>notifyPercentage&&warehouseSize>=minWarehouseSize||100==Math.round(100*percentage)/100)for(table.rows[0].cells[4].style="text-align: left;    font-weight: 700;   position: relative; background: #e5042a;",j=0;j<table.rows[i].cells.length-4;j++)4==j?table.rows[i].cells[j].style=`font-weight: 900; font-size: larger; background: linear-gradient(to right, rgba(${255*red}, ${255*green}, 0,100) ${percentage}%,rgba(255, 255, 255,50) ${percentage}%) !important`:table.rows[i].cells[j].style=`font-weight: 900; font-size: larger; background: rgb(${255*red}, ${255*green}, 0) !important`}else table.rows[i].insertCell(4).outerHTML="<th>% Full (<a>click to sort</a>)</th>",table.rows[0].cells[4].setAttribute("id","target"),$("#target").hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","auto")})}}catch{window.location.assign(game_data.link_base_pure+"&screen=overview_villages&mode=prod&group=0")}function sortTable2(e,r){for(var t=document.getElementsByClassName(e)[0],o=[],n=0,a=t.rows.length;n<a;n++){var i=t.rows[n],s=parseFloat(i.cells[4].textContent||i.cells[4].innerText);isNaN(s)||o.push([s,i])}"desc"==dir&&0==firsTime?(o.sort(function(e,r){return e[0]-r[0]}),dir="asc"):(o.sort(function(e,r){return r[0]-e[0]}),dir="desc");for(n=0,a=o.length;n<a;n++)t.appendChild(o[n][1]);o=null,firsTime=!1}table.rows[0].cells[4].addEventListener("click",function(){sortTable2("vis overview_table",4)});
